
================================================================================
–§–∞–π–ª: nobrain_bot\app.py
================================================================================
import asyncio
from aiogram import Bot, Dispatcher
from core.config import get_settings
from nobrain_bot.core.routers import setup_routers


async def main():
    config = get_settings()
    bot = Bot(token=config.bot_token)

    dp = Dispatcher()
    dp.include_router(setup_routers())

    await dp.start_polling(bot)


if __name__ == "__main__":
    asyncio.run(main())

================================================================================
–§–∞–π–ª: nobrain_bot\core\config.py
================================================================================
from dataclasses import dataclass
from dotenv import load_dotenv
import os

load_dotenv()


@dataclass
class Settings:
    bot_token: str
    admin_id: int
    site_url: str
    blog_url: str
    manager_url: str
    database_url: str


def get_settings() -> Settings:
    return Settings(
        bot_token=os.getenv("BOT_TOKEN", ""),
        admin_id=int(os.getenv("ADMIN_ID", "0")),
        site_url=os.getenv("SITE_URL", ""),
        blog_url=os.getenv("BLOG_URL", ""),
        manager_url=os.getenv("MANAGER_URL", ""),
        database_url=os.getenv(
            "DATABASE_URL",
            "postgresql+asyncpg://postgres:postgres@localhost:5432/nobrain"
        ),
    )


================================================================================
–§–∞–π–ª: nobrain_bot\core\routers.py
================================================================================
from aiogram import Router

from nobrain_bot.features.common.handlers.start_handler import router as start_router
from nobrain_bot.features.common.handlers.fallback_handler import router as fallback_router
from nobrain_bot.features.common.handlers.links_handlers import router as links_router
from nobrain_bot.features.temp_handler import router as temp_router

ALL_ROUTERS: tuple[Router, ...] = (
    start_router,
    links_router,
    temp_router,

    fallback_router
    )


def setup_routers() -> Router:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä–Ω–µ–≤–æ–π Router –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
    """
    root = Router(name="root")
    for r in ALL_ROUTERS:
        root.include_router(r)
    return root


================================================================================
–§–∞–π–ª: nobrain_bot\database\session.py
================================================================================
from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine
from sqlalchemy.orm import sessionmaker, declarative_base
from nobrain_bot.core.config import get_settings

settings = get_settings()

engine = create_async_engine(settings.database_url, echo=False)

async_session = sessionmaker[AsyncSession](
    bind=engine,
    class_=AsyncSession,
    expire_on_commit=False,
)

Base = declarative_base()


================================================================================
–§–∞–π–ª: nobrain_bot\database\__init__.py
================================================================================


================================================================================
–§–∞–π–ª: nobrain_bot\database\models\order.py
================================================================================
from datetime import datetime
import enum
from sqlalchemy import BigInteger, String, Text, DateTime, Enum, ForeignKey, JSON, Integer
from sqlalchemy.orm import Mapped, mapped_column, relationship
from nobrain_bot.database.session import Base


class OrderStatus(str, enum.Enum):
    DRAFT = "DRAFT"
    SUBMITTED = "SUBMITTED"
    APPROVED = "APPROVED"
    REJECTED = "REJECTED"
    SCHEDULED = "SCHEDULED"
    IN_PROGRESS = "IN_PROGRESS"
    DONE = "DONE"
    CANCELED = "CANCELED"


class Order(Base):
    __tablename__ = "orders"

    id: Mapped[int] = mapped_column(primary_key=True)
    tg_user_id: Mapped[int] = mapped_column(BigInteger, index=True)

    # –∫–æ–Ω—Ç–∞–∫—Ç—ã
    client_name: Mapped[str | None] = mapped_column(String(255))
    client_username: Mapped[str | None] = mapped_column(String(255))
    client_phone: Mapped[str | None] = mapped_column(String(64))

    # –æ–ø—Ä–æ—Å–Ω–∏–∫ (–∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Å–∏—Ö–æ-—à–∫–∞–ª—ã)
    formality: Mapped[int | None] = mapped_column()
    classic_modern: Mapped[int | None] = mapped_column()
    serious_fun: Mapped[int | None] = mapped_column()
    speed_quality: Mapped[int | None] = mapped_column()
    rational_emotional: Mapped[int | None] = mapped_column()
    values: Mapped[list[str] | None] = mapped_column(JSON)

    # –∑–∞—è–≤–∫–∞
    project_types: Mapped[list[str] | None] = mapped_column(JSON)
    spec_text: Mapped[str | None] = mapped_column(Text)
    references: Mapped[list[str] | None] = mapped_column(JSON)

    budget_band: Mapped[str | None] = mapped_column(String(32))
    budget_exact: Mapped[int | None] = mapped_column(Integer)
    deadline_pref: Mapped[str | None] = mapped_column(String(64))
    deadline_date: Mapped[datetime | None] = mapped_column(DateTime)

    status: Mapped[OrderStatus] = mapped_column(Enum(OrderStatus), default=OrderStatus.DRAFT, index=True)
    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)
    updated_at: Mapped[datetime] = mapped_column(default=datetime.utcnow, onupdate=datetime.utcnow)

    start_date: Mapped[datetime | None] = mapped_column(DateTime)
    due_date: Mapped[datetime | None] = mapped_column(DateTime)


================================================================================
–§–∞–π–ª: nobrain_bot\features\temp_handler.py
================================================================================
from aiogram import F, Router
from aiogram.types import Message

router = Router(name='temp_router')

@router.message(F.video)
async def get_video_id(message: Message):
    await message.answer(f"ID video: {message.video.file_id}")

================================================================================
–§–∞–π–ª: nobrain_bot\features\common\texts.py
================================================================================
def welcome(name: str) -> str:
    return (
        f"–ô–æ, {name or '–¥—Ä—É–≥'}! ‚úåÔ∏è\n\n"
        "–¢—ã –≤ –±–æ—Ç–µ —Å—Ç—É–¥–∏–∏ üß† `nobrain_production`\n"
        "üåå –ú—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –∏–¥–µ–∏ –≤ –ø—Ä–æ–¥—É–∫—Ç—ã\n\n"
        "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –æ –Ω–∞—Å, –≥–ª—è–Ω—É—Ç—å —É—Å–ª—É–≥–∏ –∏–ª–∏ —Å—Ä–∞–∑—É –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑‚ùì\n\n"
        "üëá –í—Å—ë —á–µ—Ä–µ–∑ –º–µ–Ω—é –Ω–∏–∂–µ."
    )


ABOUT_TEXT = (
    "üß† `nobrain_production` ‚Äî —Å—Ç—É–¥–∏—è, –≥–¥–µ –∫—Ä–µ–∞—Ç–∏–≤ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏.\n\n"
    "–ú—ã —Å–æ–∑–¥–∞—ë–º –ø—Ä–æ–¥—É–∫—Ç—ã üõç: –ª–æ–≥–æ—Ç–∏–ø—ã, —Ç–µ–∫—Å—Ç—ã, —Å–∞–π—Ç—ã-–≤–∏–∑–∏—Ç–∫–∏, Telegram-–±–æ—Ç—ã.\n\n"
    "–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–∞–π—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∏–∂–µ üëá"
)

BLOG_TEXT = (
    "Telegram –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ üì≤, –≤–∞–∂–Ω–æ—Å—Ç—å –∞–π–¥–µ–Ω—Ç–∏–∫–∏ üé® –∏ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ –∏–¥–µ–π üí°\n\n"
    "–í—Å—ë —ç—Ç–æ ‚Äî –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ üëá"
)

MANAGER_TEXT = "–ï—Å—Ç—å –º—ã—Å–ª—å, –∑–∞–¥–∞—á–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–ø—Ä–æ—Å‚ùì\n\n–ù–∞–ø–∏—à–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É üëá"




================================================================================
–§–∞–π–ª: nobrain_bot\features\common\handlers\fallback_handler.py
================================================================================
from aiogram import Router
from aiogram.types import Message

from nobrain_bot.features.common.keyboards.main_menu_keyboard import main_menu_kb

router = Router(name="fallback")


@router.message()
async def fallback(message: Message):
    await message.answer(
        text=(
            "üòï –Ø —Ç–µ–±—è –Ω–µ –ø–æ–Ω—è–ª.\n"
            "–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ –º–µ–Ω—é –Ω–∏–∂–µ üëá"
        ),
        reply_markup=main_menu_kb()
    )


================================================================================
–§–∞–π–ª: nobrain_bot\features\common\handlers\links_handlers.py
================================================================================
from aiogram import Router, F
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from nobrain_bot.core.config import get_settings
from nobrain_bot.features.common.keyboards.links_kb import about_kb, blog_kb, manager_kb
from nobrain_bot.features.common.texts import ABOUT_TEXT, BLOG_TEXT, MANAGER_TEXT

router = Router(name="liks")


@router.message(F.text == "üß† –ß—Ç–æ —Ç–∞–∫–æ–µ nobrain_production?")
async def about_handler(message: Message):
    config = get_settings()
    await message.answer(text=ABOUT_TEXT, reply_markup=about_kb(config), parse_mode='Markdown')


@router.message(F.text == "üì∞ –ù–∞—à –±–ª–æ–≥")
async def blog_handler(message: Message):
    config = get_settings()
    await message.answer(text=BLOG_TEXT, reply_markup=blog_kb(config))


@router.message(F.text == "üì± –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º")
async def manager_handler(message: Message):
    config = get_settings()
    await message.answer(text=MANAGER_TEXT, reply_markup=manager_kb(config))

================================================================================
–§–∞–π–ª: nobrain_bot\features\common\handlers\start_handler.py
================================================================================
from aiogram import Router, F
from aiogram.filters import CommandStart
from aiogram.types import Message

from nobrain_bot.features.common.texts import welcome
from nobrain_bot.features.common.keyboards.main_menu_keyboard import main_menu_kb


router = Router(name="start")


@router.message(F.text == '/start')
async def cmd_start(message: Message):
    await message.answer(text=welcome(message.from_user.first_name), parse_mode='Markdown', reply_markup=main_menu_kb())

================================================================================
–§–∞–π–ª: nobrain_bot\features\common\keyboards\links_kb.py
================================================================================
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton


def about_kb(config) -> InlineKeyboardMarkup:
    kb = [
        [InlineKeyboardButton(text="üåê –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç", url=config.site_url)]
    ]
    return InlineKeyboardMarkup(inline_keyboard=kb)


def blog_kb(config) -> InlineKeyboardMarkup:
    kb = [
        [InlineKeyboardButton(text="üìñ –û—Ç–∫—Ä—ã—Ç—å –±–ª–æ–≥", url=config.blog_url)]
    ]
    return InlineKeyboardMarkup(inline_keyboard=kb)


def manager_kb(config) -> InlineKeyboardMarkup:
    kb = [
        [InlineKeyboardButton(text="üì± –ù–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É", url=config.manager_url)]
    ]
    return InlineKeyboardMarkup(inline_keyboard=kb)


================================================================================
–§–∞–π–ª: nobrain_bot\features\common\keyboards\main_menu_keyboard.py
================================================================================
from aiogram.types import KeyboardButton, ReplyKeyboardMarkup


def main_menu_kb() -> ReplyKeyboardMarkup:
    kb = [
        [KeyboardButton(text="üß† –ß—Ç–æ —Ç–∞–∫–æ–µ nobrain_production?")],
        [KeyboardButton(text="üíº –í–∏—Ç—Ä–∏–Ω–∞ —É—Å–ª—É–≥")],
        [KeyboardButton(text="üìù –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑")],
        [KeyboardButton(text="üì± –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º")],
        [ KeyboardButton(text="üì∞ –ù–∞—à –±–ª–æ–≥")]
    ]
    return ReplyKeyboardMarkup(
        keyboard=kb,
        resize_keyboard=True,
        input_field_placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ"
    )


================================================================================
–§–∞–π–ª: nobrain_bot\features\order\states.py
================================================================================
from aiogram.fsm.state import StatesGroup, State


class OrderFSM(StatesGroup):
    entry = State()
    formality = State()
    classic_modern = State()
    serious_fun = State()
    speed_quality = State()
    rational_emotional = State()
    values = State()
    project_types = State()
    spec_text = State()
    budget_band = State()
    deadline_pref = State()
    review = State()


================================================================================
–§–∞–π–ª: nobrain_bot\features\order\texts.py
================================================================================

